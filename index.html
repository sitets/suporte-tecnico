<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Suporte T√©cnico Moderno</title>
  <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/833/833524.png" type="image/png" />
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <style>
    /* [Use aqui o mesmo CSS anterior com as melhorias que j√° estavam aplicadas] */
    /* Apenas removi o estilo da se√ß√£o "venda" */
  </style>
</head>
<body>

  <header>
    <nav>
      <a href="#suporte">Suporte</a>
      <a href="#assistencia">Assist√™ncia T√©cnica</a>
      <a href="#contato">Contato</a>
    </nav>
  </header>

  <main>
    <section id="suporte" tabindex="-1">
      <h2>Suporte T√©cnico</h2>
      <div class="card" tabindex="0">
        <i class="fas fa-tools" aria-hidden="true"></i>
        <p>Para d√∫vidas sobre funcionamento do produto e instala√ß√£o, conte conosco!</p>
      </div>
    </section>

    <section id="assistencia" tabindex="-1">
      <h2>Assist√™ncia T√©cnica</h2>
      <div class="card" tabindex="0">
        <i class="fas fa-wrench" aria-hidden="true"></i>
        <p>Oferecemos suporte especializado para diagn√≥stico, manuten√ß√£o e conserto de equipamentos eletr√¥nicos, redes e computadores. Conte com t√©cnicos qualificados para resolver problemas de hardware, software e conectividade.</p>
        <ul style="text-align: left; margin-top: 10px;">
          <li>‚úîÔ∏è Manuten√ß√£o de computadores e notebooks</li>
          <li>‚úîÔ∏è Reparos de rede (Wi-Fi / cabeada)</li>
          <li>‚úîÔ∏è Troca de pe√ßas e upgrades</li>
          <li>‚úîÔ∏è Instala√ß√£o de softwares e sistemas</li>
          <li>‚úîÔ∏è Suporte t√©cnico remoto e presencial</li>
        </ul>
      </div>
    </section>

    <section id="contato" tabindex="-1">
      <h2>Contato</h2>
      <form id="contact-form" novalidate>
        <input type="text" id="name" name="name" placeholder="Nome completo" required minlength="3" />
        <input type="email" id="email" name="email" placeholder="Email" required />
        <textarea id="message" name="message" placeholder="Mensagem" rows="4" required minlength="5"></textarea>
        <button type="submit">Enviar</button>
        <p id="form-feedback" role="alert" aria-live="assertive"></p>
      </form>
    </section>
  </main>

  <aside id="side-menu" aria-label="Menu de navega√ß√£o lateral">
    <a href="#suporte">üìå Suporte T√©cnico</a>
    <a href="#assistencia">üõ†Ô∏è Assist√™ncia T√©cnica</a>
    <a href="#contato">üì¨ Contato</a>
  </aside>

  <button id="back-to-top" aria-label="Voltar ao topo" title="Voltar ao topo">&uarr;</button>

  <div class="chatbox-wrapper" aria-live="polite" aria-atomic="true">
    <button id="chatbox-toggle-btn" aria-expanded="false" aria-controls="chatbox" aria-label="Abrir chat de suporte">
      <i class="fas fa-comments"></i>
    </button>

    <section class="chatbox" id="chatbox" role="region" aria-label="Chat de suporte">
      <header class="chatbox-header">
        <span>Suporte T√©cnico</span>
        <button id="chatbox-close-btn" aria-label="Fechar chat">&times;</button>
      </header>

      <div class="chat-log" id="chat-log" tabindex="0" aria-live="polite" aria-relevant="additions"></div>

      <form id="chat-form" aria-label="Enviar mensagem para suporte t√©cnico">
        <div class="chat-input-area">
          <input id="user-input" type="text" autocomplete="off" placeholder="Digite sua mensagem..." required />
          <button type="submit" id="send-btn" disabled>
            <i class="fas fa-paper-plane"></i>
          </button>
        </div>
      </form>
    </section>
  </div>

  <script>
    const backToTopBtn = document.getElementById('back-to-top');
    window.addEventListener('scroll', () => {
      backToTopBtn.style.display = window.scrollY > 300 ? 'flex' : 'none';
    });
    backToTopBtn.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    const contactForm = document.getElementById('contact-form');
    const formFeedback = document.getElementById('form-feedback');
    contactForm.addEventListener('submit', e => {
      e.preventDefault();
      if (!contactForm.checkValidity()) {
        formFeedback.textContent = 'Por favor, preencha todos os campos corretamente.';
        formFeedback.style.color = 'red';
        formFeedback.style.display = 'block';
        return;
      }
      formFeedback.style.color = 'green';
      formFeedback.textContent = 'Mensagem enviada com sucesso!';
      formFeedback.style.display = 'block';
      contactForm.reset();
      setTimeout(() => formFeedback.style.display = 'none', 4000);
    });

    const chatboxToggleBtn = document.getElementById('chatbox-toggle-btn');
    const chatbox = document.getElementById('chatbox');
    const chatboxCloseBtn = document.getElementById('chatbox-close-btn');
    const chatLog = document.getElementById('chat-log');
    const chatForm = document.getElementById('chat-form');
    const userInput = document.getElementById('user-input');
    const sendBtn = document.getElementById('send-btn');

    userInput.addEventListener('input', () => {
      sendBtn.disabled = userInput.value.trim().length === 0;
    });

    function adicionarMensagem(texto, classe) {
      const msg = document.createElement('div');
      msg.classList.add('msg', classe);
      msg.textContent = texto;
      chatLog.appendChild(msg);
      chatLog.scrollTop = chatLog.scrollHeight;
    }

    function mostrarDigitando() {
      const typing = document.createElement('div');
      typing.classList.add('typing-indicator');
      typing.textContent = 'Suporte est√° digitando...';
      chatLog.appendChild(typing);
      chatLog.scrollTop = chatLog.scrollHeight;
      return typing;
    }

    function salvarHistorico(mensagens) {
      localStorage.setItem('chatHistorico', JSON.stringify(mensagens));
    }

    function carregarHistorico() {
      const data = localStorage.getItem('chatHistorico');
      return data ? JSON.parse(data) : [];
    }

    async function gerarResposta(mensagem) {
      const respostas = [
        "Ol√°! Em que posso te ajudar hoje?",
        "Voc√™ est√° enfrentando problemas no computador, internet ou outro equipamento?",
        "Certo, me diga mais sobre o problema.",
        "Reiniciar o roteador costuma resolver problemas de internet. J√° tentou isso?",
        "Seu computador apresenta erro ao ligar ou durante o uso?",
        "Precisa de ajuda com formata√ß√£o ou instala√ß√£o de software?",
        "Temos suporte remoto! Deseja agendar?",
        "Fico √† disposi√ß√£o para te ajudar. üòÑ",
        "O problema acontece com frequ√™ncia ou foi pontual?"
      ];
      const respostaAleatoria = respostas[Math.floor(Math.random() * respostas.length)];
      return new Promise(resolve => setTimeout(() => resolve(respostaAleatoria), 1000));
    }

    function initChatHistorico() {
      const historico = carregarHistorico();
      historico.forEach(({ texto, remetente }) => {
        adicionarMensagem(texto, remetente);
      });
    }

    let historicoMensagens = carregarHistorico();

    chatboxToggleBtn.addEventListener('click', () => {
      const aberto = chatbox.classList.toggle('open');
      chatboxToggleBtn.setAttribute('aria-expanded', aberto);
      if (aberto) {
        chatbox.focus();
        userInput.focus();
      }
    });

    chatboxCloseBtn.addEventListener('click', () => {
      chatbox.classList.remove('open');
      chatboxToggleBtn.setAttribute('aria-expanded', false);
      chatboxToggleBtn.focus();
    });

    chatForm.addEventListener('submit', async e => {
      e.preventDefault();
      const textoUsuario = userInput.value.trim();
      if (!textoUsuario) return;

      adicionarMensagem(textoUsuario, 'user');
      historicoMensagens.push({ texto: textoUsuario, remetente: 'user' });
      salvarHistorico(historicoMensagens);
      userInput.value = '';
      sendBtn.disabled = true;

      const typing = mostrarDigitando();
      const resposta = await gerarResposta(textoUsuario);
      chatLog.removeChild(typing);

      adicionarMensagem(resposta, 'bot');
      historicoMensagens.push({ texto: resposta, remetente: 'bot' });
      salvarHistorico(historicoMensagens);
    });

    initChatHistorico();
  </script>
</body>
</html>
